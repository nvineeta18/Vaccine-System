<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2>Book Vaccination Appointment</h2>
    <button class="btn btn-outline-secondary" routerLink="/dashboard">
      ‚Üê Back to Dashboard
    </button>
  </div>

  <div class="card">
    <div class="card-header">
      <h5>Schedule Your Vaccination</h5>
    </div>
    <div class="card-body">
      <form (ngSubmit)="onSubmit()" #appointmentForm="ngForm">
        
        <!-- Vaccination Center Selection -->
        <div class="mb-3">
          <label for="center" class="form-label">Vaccination Center *</label>
          <select 
            class="form-select" 
            id="center"
            [(ngModel)]="appointmentData.vaccinationCenterId" 
            name="vaccinationCenterId" 
            required>
            <option value="0">Select a vaccination center</option>
            <option *ngFor="let center of vaccinationCenters" [value]="center.id">
              {{ center.name }} - {{ center.city }}, {{ center.state }}
            </option>
          </select>
        </div>

        <!-- Vaccine Type Selection -->
        <div class="mb-3">
          <label for="vaccine" class="form-label">Vaccine Type *</label>
          <select 
            class="form-select" 
            id="vaccine"
            [(ngModel)]="appointmentData.vaccineType" 
            name="vaccineType" 
            required>
            <option value="">Select vaccine type</option>
            <option *ngFor="let vaccine of vaccineTypes" [value]="vaccine">
              {{ vaccine }}
            </option>
          </select>
        </div>

        <!-- Date Selection -->
        <div class="mb-3">
          <label for="date" class="form-label">Appointment Date *</label>
          <input 
            type="date" 
            class="form-control" 
            id="date"
            [(ngModel)]="appointmentData.appointmentDate"
            [min]="getMinDate()"
            name="appointmentDate" 
            required>
        </div>

        <!-- Time Selection -->
        <div class="mb-3">
          <label for="time" class="form-label">Appointment Time *</label>
          <select 
            class="form-select" 
            id="time"
            [(ngModel)]="appointmentData.appointmentTime" 
            name="appointmentTime" 
            required>
            <option value="">Select time slot</option>
            <option *ngFor="let time of timeSlots" [value]="time">
              {{ time }}
            </option>
          </select>
        </div>

        <!-- Success Message -->
        <div class="alert alert-success" *ngIf="success">
          {{ success }}
        </div>

        <!-- Error Message -->
        <div class="alert alert-danger" *ngIf="error">
          {{ error }}
        </div>

        <!-- Loading State -->
        <div *ngIf="loading" class="text-center">
          <div class="spinner-border" role="status"></div>
          <p>Loading...</p>
        </div>

        <!-- Submit Button -->
        <div class="d-flex gap-2">
          <button 
            type="submit" 
            class="btn btn-primary"
            [disabled]="appointmentForm.invalid || loading">
            <i class="fas fa-calendar-plus me-1"></i>
            Book Appointment
          </button>
          <button 
            type="button" 
            class="btn btn-secondary"
            (click)="resetForm()">
            Reset Form
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
